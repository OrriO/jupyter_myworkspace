# 用户|人才流失模型项目

## 1.数据挖掘项目-人才流失模型项目介绍

* 业务介绍：
  * 人才或员工是企业或其他单位的核心，如何能够保障员工的流失率或离职率或电商平台中用户的流失率下降，是人力资源或平台需要解决问题。
* 技术实现：
  * 数据来源
  * 数据进行简单分析
  * 特征工程
    * 数据处理
      * 类别型数据处理
      * 数值型数据处理
      * 有序型数据处理
    * 特征选择
    * 特征降维
  * 建立模型
  * 数据的不平衡问题如何处理？
  * 评测指标

## 2.人才流失模型需求分析和数据探索分析

* 需求分析
  * 1.分析各个维度对人才流失的影响
  * 2.构建机器学习模型对人才流失进行预测性分析
* 数据部分
  * 1100条训练数据
  * 30特征+1类别标签
  * 业务层面
    * 人才自身的原因---流失
    * 公司的原因---------流失
    * 外界原因------------流失
  * 数据层面
    * 结构化数据---从Mysql或大数据平台中提取
    * 数据分类：
      * 数值型数据
      * 类别型数据源
      * 有序型数据(数值型+顺序)

## 3.项目架构

* 数据来源
  * 结构化数据
  * 非结构化数据
  * 半结构化数据
  * 关系型数据库
  * 分布式文件系统等
* 数据获取：
  * csv文件
  * tsv文件
  * txt文件
  * libsvm格式
* 数据处理：
  * pandas处理
  * numpy处理
* 数据可视化分析：
  * 分析各个特征之间相关性，以及和类别标签的关系
* 特征工程
  * 特征的处理---类别数据的数值化
  * 数值型数据的处理
  * 特征降维
  * 特征选择等
* 建立模型：
  * 选择监督学习中分类模型
    * LR逻辑斯特回归模型
    * RF随机森林模型
    * GBDT梯度提升决策树模型
* 模型预测
  * 模型校验
  * 预测结果和准确率
* 模型保存
  * model.save
  * joblib.dump(model)------load
  * pickle持久化方式
* 模型上线
  * 加载已经训练好的PKL文件进行模型预测分析

## 4.环境准备

* numpy矩阵运算+pandas处理结构化数据+Matplotlib2D绘图+Seaborn库绘图+imbalance不平衡数据处理

## 5.数据的探索和思考正负样本比例

* 如何加载数据？
  * 使用pandas的read_csv方式
  * 查看基本属性信息
    * info()
    * head()
    * columns

## 6.业务数据可视化展示

* seaborn可视化库实现
* boxplot方法--箱线图
* pairplot方法---多个变量图像
* countplot方法---绘制直方图
* 通过业务数据的简单的可视化分析得到一些关键特征

## 7.特征选择和特征数据筛选

* 首先根据原始数据对特征数据进行筛选
* 分清楚那些是数值型数据、类别型数据、有序型数据
* 同时结合pandas读取数据集后，使用info属性通过不同类型同时划分
* 接下来对不同的数据进行不同的处理0----这里主要处理的是类别型变量
* ​

## 7.划分测试数据集和训练数据集

- 1.整合特征数据
  - 根据不同类型的数据进行整合
  - 注意正负样本比例
  - 选中正负样本的方式进行整合的
- 2.使用sklearn中train_test_split方法进行切分

## 8.labelencodewr和onehotencoder

* 对不同数据进行处理

- 对类别型数据处理

  - 使用labelencoder，在使用onehotencoder

  - 同时使用DictVectorizer作为类别型数据转换方式

  - 对处理的类别型数据进行简单聚合

  - ```python
    #简单聚合操作
    print("Gender数据：")
    print(train_data.groupby("Gender_label").size())
    # Gender数据：
    # Gender_label
    # 0    363
    # 1    516
    print("MaritalStatus数据：")
    print(train_data.groupby("MaritalStatus").size())
    # MaritalStatus
    # Divorced    184
    # Married     414
    # Single      281
    print("OverTime数据：")
    print(train_data.groupby("OverTime").size())
    # OverTime
    # No     636
    # Yes    243
    # dtype: int64
    ```

  - ​

## 9.整合所有特征数据

* 将类别型数据结合数值型数据和有序型数据的values进行整合
* 也可以使用dictvector

## 10.使用GBDT和LR算法训练模型并预测

* 直接使用GBDT算法和LR算法预测数据
* 建模过程中需要将上述处理好的数据进行输入，通过指定不同的参数信息得到最佳模型参数
* 通过不同评判指标进行分析
* 通过train_test_split结合dicvector进行开发---达到同样效果

## 11.安装imbalanced-learn包

* 安装imbalance包
* pip install imblearn
* python环境下：python>>
* import imblearn 如果不会报错就说明安装成功

## 12.对不平衡数据的处理

* 欠采样
* 过采样

## 13.过采样技术详解

* 过采样
  * 通过对样本个数较少的数据通过重采样达到样本均衡
  * SMOTE算法

## 14.欠采样技术详解

* 欠采样
  * 通过对样本个数较多的样本通过减少样本个数达到i平衡
  * 聚类、集成采样算法

## 15.结合采样技术对模型进行重新建模和预测

* 对原来有样本不均衡情况使用smote算法使得原来的样本均衡
* 通过均衡的样本结合算法进行模型训练
* 通过训练好的模型在进行预测
* 同时要注意的是，只有训练集需要采样，因为训练集是用于训练模型

## 16.项目总结

* 数据来源
* 数据导入
* 基础数据的分析
* 数据的可视化分析
* 数据的特征工程
* 不同类型的数据做处理
* 组合新的特征的数据
* 考虑数据样本的不均衡问题
* 训练模型
* 校验模型
* 保存模型

## 17.总结

